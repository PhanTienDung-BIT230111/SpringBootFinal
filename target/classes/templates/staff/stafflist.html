<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Nh√¢n s·ª±</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #f8f9fa;
        }
        .sidebar {
            width: 250px;
            height: 100vh;
            position: fixed;
            left: -250px;
            top: 0;
            background-color: #f8f9fa;
            transition: 0.3s;
            padding-top: 20px;
            z-index: 1000;
            border-right: 1px solid #dee2e6;
        }
        .sidebar.active {
            left: 0;
        }
        .sidebar a {
            display: block;
            padding: 10px 25px;
            color: #000;
            text-decoration: none;
        }
        .sidebar a:hover {
            background-color: #e9ecef;
        }
        .content {
            margin-left: 0;
            padding: 20px;
            transition: margin-left 0.3s;
        }
        .content.shift {
            margin-left: 250px;
        }
        .topbar {
            background-color: white;
            padding: 12px 20px;
            box-shadow: 0 1px 4px rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 500;
        }
        .tabs a {
            margin-right: 10px;
            padding: 6px 12px;
            font-weight: 500;
            border-radius: 6px;
            text-decoration: none;
            color: #333;
        }
        .tabs a.active {
            background-color: #0d6efd;
            color: white;
        }
        .summary-box {
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            flex: 1;
            margin-right: 10px;
        }
        .summary-box:last-child {
            margin-right: 0;
        }
        .staff-card {
            background-color: white;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 10px;
            box-shadow: 0 1px 4px rgba(0,0,0,0.05);
            transition: background-color 0.2s;
        }
        .staff-card:hover {
            background-color: #f1f1f1;
        }
        .badge-status {
            font-size: 12px;
            background-color: #eee;
            padding: 2px 8px;
            border-radius: 5px;
        }
        .status-active { background-color: #d1e7dd; color: #0f5132; }
        .status-leave { background-color: #fff3cd; color: #664d03; }
        .status-intern { background-color: #cff4fc; color: #055160; }
    </style>
</head>
<body>
<div class="sidebar" id="sidebar">
    <h5 class="text-center mb-3">Menu</h5>
    <a href="/home"><i class="fas fa-home"></i> Trang ch·ªß</a>
    <a href="/home/projects"><i class="fas fa-briefcase"></i> D·ª± √°n</a>
    <a href="/home/projects/new"><i class="fas fa-plus-circle"></i> T·∫°o d·ª± √°n</a>
    <a href="/home/staff"><i class="fas fa-users"></i> Nh√¢n s·ª±</a>
    <a href="/home/contracts"><i class="fas fa-file-contract"></i> H·ª£p ƒë·ªìng</a>
    <a href="/home/reports"><i class="fas fa-chart-line"></i> B√°o c√°o</a>
    <a href="/logout" class="text-danger"><i class="fas fa-sign-out-alt"></i> ƒêƒÉng xu·∫•t</a>
</div>
<div class="content" id="mainContent">
    <div class="topbar">
        <button class="btn btn-outline-dark me-3" onclick="toggleSidebar()"><i class="fas fa-bars"></i></button>
        <h4 class="mb-0">Nh√¢n s·ª±</h4>
        <form th:action="@{/home/staff/search}" method="get" class="ms-3 d-flex">
            <input type="text" name="keyword" class="form-control" placeholder="T√¨m ki·∫øm nh√¢n s·ª±...">
            <button type="submit" class="btn btn-outline-secondary ms-2">T√¨m</button>
        </form>
        <a href="/home/staff/add" class="btn btn-dark ms-auto"><i class="fas fa-plus"></i> Th√™m m·ªõi</a>
    </div>
    <div class="d-flex mt-4 mb-3">
        <div class="summary-box">
            <p class="mb-1">üë• T·ªïng nh√¢n s·ª±</p>
            <h5 th:text="${staffList.size()}">0</h5>
        </div>
        <div class="summary-box">
            <p class="mb-1">üü¢ ƒêang ho·∫°t ƒë·ªông</p>
            <h5 th:text="${activeCount}">0</h5>
        </div>
    </div>
    <div class="tabs mb-3">
        <a th:href="@{/home/staff}" th:class="${position == null} ? 'active' : ''">T·∫•t c·∫£</a>
        <a th:href="@{/home/staff/filter(position='Qu·∫£n l√Ω')}" th:class="${position == 'Qu·∫£n l√Ω'} ? 'active' : ''">Qu·∫£n l√Ω</a>
        <a th:href="@{/home/staff/filter(position='Nh√¢n vi√™n')}" th:class="${position == 'Nh√¢n vi√™n'} ? 'active' : ''">Nh√¢n vi√™n</a>
        <a th:href="@{/home/staff/filter(position='Th·ª±c t·∫≠p')}" th:class="${position == 'Th·ª±c t·∫≠p'} ? 'active' : ''">Th·ª±c t·∫≠p</a>
    </div>
    <div th:if="${#lists.isEmpty(staffList)}">
        <p class="text-muted">Kh√¥ng c√≥ nh√¢n s·ª± n√†o ph√π h·ª£p.</p>
    </div>
    <div th:each="staff : ${staffList}" class="staff-card" th:onclick="|location.href='/home/staff/detail/' + ${staff.id}|">
        <div class="d-flex justify-content-between align-items-center mb-2">
            <div class="d-flex align-items-center">
                <img th:src="@{'/uploads/avatar/' + ${staff.avatar}}" width="50" class="me-3 rounded-circle" alt="avatar">
                <div>
                    <h5 th:text="${staff.fullName}" class="mb-1">T√™n nh√¢n s·ª±</h5>
                    <p class="mb-0 text-muted" th:text="${staff.position}">Ch·ª©c v·ª•</p>
                    <p class="mb-0 text-muted small"><i class="fas fa-envelope"></i> <span th:text="${staff.email}">email</span></p>
                </div>
            </div>
            <span class="badge-status"
                  th:classappend="${staff.status == 'Ho·∫°t ƒë·ªông'} ? ' status-active' :
                                   (${staff.status == 'Ngh·ªâ ph√©p'} ? ' status-leave' :
                                   (${staff.status == 'Th·ª±c t·∫≠p'} ? ' status-intern' : ''))"
                  th:text="${staff.status}">Tr·∫°ng th√°i</span>
        </div>
    </div>
</div>
<script>
    function toggleSidebar() {
        const sidebar = document.getElementById('sidebar');
        const content = document.getElementById('mainContent');
        sidebar.classList.toggle('active');
        content.classList.toggle('shift');
    }
</script>
</body>
</html>
